<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
<head>
  <meta charset="UTF-8">
  <title>{{ .Title }} | OCHO</title>
  <meta name="description" content="{{ .Params.description }}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://api.fontshare.com/v2/css?f[]=didot@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <header class="main-header">
    <div class="container">
      <a href="{{ "/" | relLangURL }}" class="brand-identity">
        {{ partial "logo.html" . }}
        <span class="header-text">OCHO</span>
      </a>
      <nav class="main-nav">
        <ul>
          <li><a href="{{ "/#servicios" | relLangURL }}" class="nav-link">{{ i18n "header_services" }}</a></li>
          <li><a href="{{ "/blog/" | relLangURL }}">{{ i18n "header_blog" }}</a></li>
          <li><a href="{{ "/#fer" | relLangURL }}" class="nav-link">{{ i18n "header_about" }}</a></li>
          <li><a href="{{ "/#contacto" | relLangURL }}" class="nav-link btn-cta-nav">{{ i18n "header_cta" }}</a></li>
          <li class="lang-switcher">
            {{ if eq .Site.Language.Lang "es" }}
            <span class="active">ES</span>
            <span class="lang-sep">|</span>
            <a href="{{ .RelPermalink | relLangURL | replaceRE "^/es" "/pt" }}">PT</a>
            {{ else }}
            <a href="{{ .RelPermalink | relLangURL | replaceRE "^/pt" "/es" }}">ES</a>
            <span class="lang-sep">|</span>
            <span class="active">PT</span>
            {{ end }}
          </li>
        </ul>
      </nav>
      <button id="menu-toggle" class="menu-toggle" aria-label="Abrir menú"></button>
    </div>
  </header>
  {{ block "main" . }}{{ end }}
  <footer class="main-footer">
    <div class="footer-inner">
      <p class="footer-brand">&copy; {{ now.Year }} OCHO</p>
      <p class="footer-text">{{ i18n "footer_text" }}</p>
      <nav class="footer-legal">
        <a href="{{ "/aviso-legal/" | relLangURL }}">Aviso Legal</a>
        <span>|</span>
        <a href="{{ "/politica-privacidad/" | relLangURL }}">Privacidad</a>
        <span>|</span>
        <a href="{{ "/cookies/" | relLangURL }}">Cookies</a>
        <span>|</span>
        <a href="{{ "/condiciones/" | relLangURL }}">Condiciones</a>
      </nav>
    </div>
  </footer>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const menuToggle = document.getElementById("menu-toggle");
      const navMenu = document.querySelector(".main-nav ul");
      document.querySelectorAll(".main-nav a").forEach(link => {
        link.addEventListener("click", () => {
          if (window.innerWidth <= 900 && navMenu.classList.contains("active")) {
            navMenu.classList.remove("active");
          }
        });
      });
      if (menuToggle && navMenu) {
        menuToggle.addEventListener("click", () => {
          navMenu.classList.toggle("active");
        });
      }
      const isHome = document.body.classList.contains("home") || document.querySelector("section[id]");
      if (!isHome) return;
      const navLinks = document.querySelectorAll(".main-nav a[href^='#']");
      const sections = document.querySelectorAll("section[id]");
      const header = document.querySelector(".main-header");
      function setActiveLink() {
        const scrollPos = window.scrollY + (header?.offsetHeight || 0) + 10;
        sections.forEach(section => {
          const top = section.offsetTop;
          const bottom = top + section.offsetHeight;
          const id = section.id;
          const link = document.querySelector(`.main-nav a[href="#${id}"]`);
          if (link && scrollPos >= top && scrollPos < bottom) {
            navLinks.forEach(a => a.classList.remove("active"));
            link.classList.add("active");
          }
        });
      }
      navLinks.forEach(link => {
        link.addEventListener("click", function (e) {
          const target = document.querySelector(this.hash);
          if (!target) return;
          e.preventDefault();
          navMenu.classList.remove("active");
          target.scrollIntoView({ behavior: "smooth" });
        });
      });
      window.addEventListener("scroll", setActiveLink);
    });
  </script>
</body>
</html>
